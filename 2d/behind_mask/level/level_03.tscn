[gd_scene load_steps=8 format=3 uid="uid://blevel03"]

[ext_resource type="PackedScene" uid="uid://bplayer001" path="res://player/Player.tscn" id="1_player"]
[ext_resource type="PackedScene" uid="uid://benemy001" path="res://enemy/Enemy.tscn" id="2_enemy"]
[ext_resource type="PackedScene" uid="uid://bdoor001" path="res://interactables/ExitDoor.tscn" id="3_door"]
[ext_resource type="PackedScene" uid="uid://bhud001" path="res://ui/HUD.tscn" id="4_hud"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wall_h"]
size = Vector2(1024, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wall_v"]
size = Vector2(16, 768)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_corridor"]
size = Vector2(320, 16)

[node name="Level03" type="Node2D"]

[node name="LevelTitle" type="Label" parent="."]
offset_left = 64.0
offset_top = 320.0
offset_right = 288.0
offset_bottom = 448.0
theme_override_colors/font_color = Color(0.3, 0.3, 0.3, 1)
theme_override_font_sizes/font_size = 18
horizontal_alignment = 1
text = "Level 3
The final challenge!"

[node name="Walls" type="Node2D" parent="."]

[node name="WallTop" type="StaticBody2D" parent="Walls"]
position = Vector2(512, 8)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallTop"]
shape = SubResource("RectangleShape2D_wall_h")

[node name="ColorRect" type="ColorRect" parent="Walls/WallTop"]
offset_left = -512.0
offset_top = -8.0
offset_right = 512.0
offset_bottom = 8.0
color = Color(0.2, 0.2, 0.25, 1)

[node name="WallBottom" type="StaticBody2D" parent="Walls"]
position = Vector2(512, 760)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallBottom"]
shape = SubResource("RectangleShape2D_wall_h")

[node name="ColorRect" type="ColorRect" parent="Walls/WallBottom"]
offset_left = -512.0
offset_top = -8.0
offset_right = 512.0
offset_bottom = 8.0
color = Color(0.2, 0.2, 0.25, 1)

[node name="WallLeft" type="StaticBody2D" parent="Walls"]
position = Vector2(8, 384)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallLeft"]
shape = SubResource("RectangleShape2D_wall_v")

[node name="ColorRect" type="ColorRect" parent="Walls/WallLeft"]
offset_left = -8.0
offset_top = -384.0
offset_right = 8.0
offset_bottom = 384.0
color = Color(0.2, 0.2, 0.25, 1)

[node name="WallRight" type="StaticBody2D" parent="Walls"]
position = Vector2(1016, 384)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallRight"]
shape = SubResource("RectangleShape2D_wall_v")

[node name="ColorRect" type="ColorRect" parent="Walls/WallRight"]
offset_left = -8.0
offset_top = -384.0
offset_right = 8.0
offset_bottom = 384.0
color = Color(0.2, 0.2, 0.25, 1)

[node name="CorridorTop" type="StaticBody2D" parent="Walls"]
position = Vector2(512, 256)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/CorridorTop"]
shape = SubResource("RectangleShape2D_corridor")

[node name="ColorRect" type="ColorRect" parent="Walls/CorridorTop"]
offset_left = -160.0
offset_top = -8.0
offset_right = 160.0
offset_bottom = 8.0
color = Color(0.2, 0.2, 0.25, 1)

[node name="CorridorBottom" type="StaticBody2D" parent="Walls"]
position = Vector2(512, 512)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/CorridorBottom"]
shape = SubResource("RectangleShape2D_corridor")

[node name="ColorRect" type="ColorRect" parent="Walls/CorridorBottom"]
offset_left = -160.0
offset_top = -8.0
offset_right = 160.0
offset_bottom = 8.0
color = Color(0.2, 0.2, 0.25, 1)

[node name="Player" parent="." instance=ExtResource("1_player")]
position = Vector2(128, 640)

[node name="Enemy1" parent="." instance=ExtResource("2_enemy")]
position = Vector2(512, 384)
patrol_distance = 96.0

[node name="Enemy2" parent="." instance=ExtResource("2_enemy")]
position = Vector2(768, 160)
patrol_distance = 128.0

[node name="Enemy3" parent="." instance=ExtResource("2_enemy")]
position = Vector2(768, 640)
patrol_distance = 128.0

[node name="ExitDoor" parent="." instance=ExtResource("3_door")]
position = Vector2(896, 128)
next_level_path = "res://ui/win_screen.tscn"

[node name="HUD" parent="." instance=ExtResource("4_hud")]

[node name="Background" type="ColorRect" parent="."]
z_index = -10
offset_right = 1024.0
offset_bottom = 768.0
color = Color(0.12, 0.12, 0.15, 1)
