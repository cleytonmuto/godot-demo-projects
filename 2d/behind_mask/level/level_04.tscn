[gd_scene load_steps=18 format=3 uid="uid://blevel04"]

[ext_resource type="PackedScene" uid="uid://bplayer001" path="res://player/Player.tscn" id="1_player"]
[ext_resource type="PackedScene" uid="uid://benemy001" path="res://enemy/Enemy.tscn" id="2_enemy"]
[ext_resource type="PackedScene" uid="uid://bdoor001" path="res://interactables/ExitDoor.tscn" id="3_door"]
[ext_resource type="PackedScene" uid="uid://bhud001" path="res://ui/HUD.tscn" id="4_hud"]
[ext_resource type="PackedScene" uid="uid://claser001" path="res://interactables/LaserBarrier.tscn" id="5_laser"]
[ext_resource type="PackedScene" uid="uid://ccamera001" path="res://interactables/SecurityCamera.tscn" id="6_camera"]
[ext_resource type="PackedScene" uid="uid://cpatrol001" path="res://interactables/PatrollingLaser.tscn" id="7_patrol"]
[ext_resource type="PackedScene" uid="uid://coneway001" path="res://interactables/OneWayDoor.tscn" id="8_oneway"]
[ext_resource type="PackedScene" uid="uid://cdetector001" path="res://enemy/DetectorEnemy.tscn" id="9_detector"]
[ext_resource type="PackedScene" uid="uid://chunter001" path="res://enemy/HunterEnemy.tscn" id="10_hunter"]
[ext_resource type="PackedScene" uid="uid://cmimic001" path="res://enemy/MimicEnemy.tscn" id="11_mimic"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wall_h"]
size = Vector2(1024, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wall_v"]
size = Vector2(16, 768)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_obstacle"]
size = Vector2(16, 200)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_obstacle_small"]
size = Vector2(16, 120)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_obstacle_horizontal"]
size = Vector2(220, 16)

[node name="Level04" type="Node2D"]

[node name="LevelTitle" type="Label" parent="."]
offset_left = 32.0
offset_top = 620.0
offset_right = 400.0
offset_bottom = 750.0
theme_override_colors/font_color = Color(0.35, 0.35, 0.35, 1)
theme_override_font_sizes/font_size = 12
text = "Level 4 - The Gauntlet
PURPLE enemy: Sees all masks except Ghost
GREEN enemy: Detects Guard after 2s proximity  
GRAY enemy: Inverted behavior - chases 'safe' masks!
Cameras fill detection meter - use Ghost!"

[node name="Walls" type="Node2D" parent="."]

[node name="WallTop" type="StaticBody2D" parent="Walls"]
position = Vector2(512, 8)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallTop"]
shape = SubResource("RectangleShape2D_wall_h")

[node name="ColorRect" type="ColorRect" parent="Walls/WallTop"]
offset_left = -512.0
offset_top = -8.0
offset_right = 512.0
offset_bottom = 8.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="WallBottom" type="StaticBody2D" parent="Walls"]
position = Vector2(512, 760)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallBottom"]
shape = SubResource("RectangleShape2D_wall_h")

[node name="ColorRect" type="ColorRect" parent="Walls/WallBottom"]
offset_left = -512.0
offset_top = -8.0
offset_right = 512.0
offset_bottom = 8.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="WallLeft" type="StaticBody2D" parent="Walls"]
position = Vector2(8, 384)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallLeft"]
shape = SubResource("RectangleShape2D_wall_v")

[node name="ColorRect" type="ColorRect" parent="Walls/WallLeft"]
offset_left = -8.0
offset_top = -384.0
offset_right = 8.0
offset_bottom = 384.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="WallRight" type="StaticBody2D" parent="Walls"]
position = Vector2(1016, 384)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/WallRight"]
shape = SubResource("RectangleShape2D_wall_v")

[node name="ColorRect" type="ColorRect" parent="Walls/WallRight"]
offset_left = -8.0
offset_top = -384.0
offset_right = 8.0
offset_bottom = 384.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="MiddleWall1" type="StaticBody2D" parent="Walls"]
position = Vector2(350, 300)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/MiddleWall1"]
shape = SubResource("RectangleShape2D_obstacle")

[node name="ColorRect" type="ColorRect" parent="Walls/MiddleWall1"]
offset_left = -8.0
offset_top = -100.0
offset_right = 8.0
offset_bottom = 100.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="MiddleWall2" type="StaticBody2D" parent="Walls"]
position = Vector2(650, 500)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/MiddleWall2"]
shape = SubResource("RectangleShape2D_obstacle")

[node name="ColorRect" type="ColorRect" parent="Walls/MiddleWall2"]
offset_left = -8.0
offset_top = -100.0
offset_right = 8.0
offset_bottom = 100.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="Walls/Obstacle3" type="StaticBody2D" parent="Walls"]
position = Vector2(150, 200)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Obstacle3"]
shape = SubResource("RectangleShape2D_obstacle_small")

[node name="ColorRect" type="ColorRect" parent="Walls/Obstacle3"]
offset_left = -8.0
offset_top = -60.0
offset_right = 8.0
offset_bottom = 60.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="Walls/Obstacle4" type="StaticBody2D" parent="Walls"]
position = Vector2(850, 600)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Obstacle4"]
shape = SubResource("RectangleShape2D_obstacle_small")

[node name="ColorRect" type="ColorRect" parent="Walls/Obstacle4"]
offset_left = -8.0
offset_top = -60.0
offset_right = 8.0
offset_bottom = 60.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="Walls/Obstacle5" type="StaticBody2D" parent="Walls"]
position = Vector2(500, 150)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Obstacle5"]
shape = SubResource("RectangleShape2D_obstacle_horizontal")

[node name="ColorRect" type="ColorRect" parent="Walls/Obstacle5"]
offset_left = -110.0
offset_top = -8.0
offset_right = 110.0
offset_bottom = 8.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="Walls/Obstacle6" type="StaticBody2D" parent="Walls"]
position = Vector2(750, 450)
collision_layer = 1
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls/Obstacle6"]
shape = SubResource("RectangleShape2D_obstacle_horizontal")

[node name="ColorRect" type="ColorRect" parent="Walls/Obstacle6"]
offset_left = -110.0
offset_top = -8.0
offset_right = 110.0
offset_bottom = 8.0
color = Color(0.7, 0.5, 0.6, 1)

[node name="Player" parent="." instance=ExtResource("1_player")]
position = Vector2(100, 680)

[node name="Enemy1" parent="." instance=ExtResource("2_enemy")]
position = Vector2(250, 500)
patrol_distance = 100.0
patrol_pattern = 3

[node name="DetectorEnemy1" parent="." instance=ExtResource("9_detector")]
position = Vector2(500, 350)
patrol_distance = 80.0
patrol_pattern = 2

[node name="HunterEnemy1" parent="." instance=ExtResource("10_hunter")]
position = Vector2(750, 200)
patrol_distance = 120.0

[node name="MimicEnemy1" parent="." instance=ExtResource("11_mimic")]
position = Vector2(800, 550)
patrol_distance = 60.0
patrol_pattern = 1

[node name="Enemy2" parent="." instance=ExtResource("2_enemy")]
position = Vector2(100, 300)
patrol_distance = 80.0

[node name="Enemy3" parent="." instance=ExtResource("2_enemy")]
position = Vector2(600, 100)
patrol_distance = 100.0

[node name="DetectorEnemy2" parent="." instance=ExtResource("9_detector")]
position = Vector2(300, 600)
patrol_distance = 70.0
patrol_pattern = 1

[node name="LaserBarrier1" parent="." instance=ExtResource("5_laser")]
position = Vector2(450, 600)

[node name="LaserBarrier2" parent="." instance=ExtResource("5_laser")]
position = Vector2(550, 250)

[node name="SecurityCamera1" parent="." instance=ExtResource("6_camera")]
position = Vector2(20, 400)
rotation = 0.0
rotation_range = 120.0

[node name="SecurityCamera2" parent="." instance=ExtResource("6_camera")]
position = Vector2(512, 20)
rotation = 1.5708
rotation_range = 90.0

[node name="PatrollingLaser1" parent="." instance=ExtResource("7_patrol")]
position = Vector2(700, 400)
sweep_distance = 150.0

[node name="OneWayDoor1" parent="." instance=ExtResource("8_oneway")]
position = Vector2(350, 550)
passable_from = 0

[node name="ExitDoor" parent="." instance=ExtResource("3_door")]
position = Vector2(920, 100)
next_level_path = "res://ui/win_screen.tscn"

[node name="HUD" parent="." instance=ExtResource("4_hud")]

[node name="Background" type="ColorRect" parent="."]
z_index = -10
offset_right = 1024.0
offset_bottom = 768.0
color = Color(0.35, 0.2, 0.25, 1)

[node name="BackgroundGradient" type="ColorRect" parent="."]
z_index = -9
offset_right = 1024.0
offset_bottom = 384.0
color = Color(0.5, 0.3, 0.4, 0.5)

[node name="BackgroundPattern" type="ColorRect" parent="."]
z_index = -8
offset_left = 0.0
offset_top = 0.0
offset_right = 1024.0
offset_bottom = 768.0
color = Color(0.4, 0.25, 0.3, 0.3)
